(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["LatticeLottery"]=t(require("vue")):e["LatticeLottery"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="f2a0")}({"0aaa":function(e,t,n){"use strict";n("9c24")},1902:function(e,t,n){},"22a7":function(e,t,n){},3607:function(e,t,n){"use strict";n("22a7")},4296:function(e,t,n){},"79e4":function(e,t,n){var i,o,c;(function(n,l){o=[],i=l,c="function"===typeof i?i.apply(t,o):i,void 0===c||(e.exports=c)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(b){var n,i,o,c=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,r=c.exec(b.stack)||l.exec(b.stack),s=r&&r[1]||!1,a=r&&r[2]||!1,u=document.location.href.replace(document.location.hash,""),m=document.getElementsByTagName("script");s===u&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(i,"$1").trim());for(var d=0;d<m.length;d++){if("interactive"===m[d].readyState)return m[d];if(m[d].src===s)return m[d];if(s===u&&m[d].innerHTML&&m[d].innerHTML.trim()===o)return m[d]}return null}}return e}))},"8bbf":function(t,n){t.exports=e},"8cb2":function(e,t,n){"use strict";n("a8e5")},"9c24":function(e,t,n){},a8e5:function(e,t,n){},b3f2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n}},b91c:function(e,t,n){"use strict";n("e12d")},cf50:function(e,t,n){"use strict";n("1902")},e12d:function(e,t,n){},f2a0:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var i=window.document.currentScript,o=n("79e4");i=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var c=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(n.p=c[1])}var l=n("8bbf");const r={class:"lottery__box--grid"},s={class:"lattice__lottery__box"},a={class:"lottery__row"},u={class:"lottery__row right"},m={class:"lottery__row right"};function d(e,t,n,i,o,c){const d=Object(l["resolveComponent"])("lottery-item"),b=Object(l["resolveComponent"])("lottery-go");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",r,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",a,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.luckyList.slice(0,3),(t,n)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:n===e.listIndex,image:t.image,key:n,label:t.label},null,8,["isAct","image","label"]))),128))]),Object(l["createElementVNode"])("div",u,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.luckyList.slice(3,4),(t,n)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:n+3===e.listIndex,image:t.image,key:n+3,label:t.label},null,8,["isAct","image","label"]))),128)),Object(l["createVNode"])(b,{onOnClick:e.onsubmit,label:e.btnText},null,8,["onOnClick","label"]),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.luckyList.slice(-1),(t,n)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:n+7===e.listIndex,image:t.image,key:n+7,label:t.label},null,8,["isAct","image","label"]))),128))]),Object(l["createElementVNode"])("div",m,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.luckyList.slice(4,7),(t,n)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{style:[{marginBottom:0}],isAct:n+4===e.listIndex,image:t.image,key:n+4,label:t.label},null,8,["isAct","image","label"]))),128))])])])}const b=["src"],h={key:1,class:"prize__item__mask"},p={key:2};function f(e,t,n,i,o,c){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["prize__item","lattice__lottery__item",n.isAct?"lattice__lottery__actItem":""])},[n.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,class:"prize__item__image",src:n.image,alt:""},null,8,b)):Object(l["createCommentVNode"])("",!0),n.isAct?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h)):Object(l["createCommentVNode"])("",!0),n.label?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",p,Object(l["toDisplayString"])(n.label),1)):Object(l["createCommentVNode"])("",!0)],2)}var y={props:{isAct:{type:Boolean,default:!1},label:{type:String,default:""},image:{type:String}}},g=(n("3607"),n("b3f2")),O=n.n(g);const j=O()(y,[["render",f]]);var k=j;const v={key:0};function _(e,t,n,i,o,c){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{onClick:t[0]||(t[0]=(...e)=>c.onClick&&c.onClick(...e)),class:"lottery__button lattice__lottery__btn"},[n.label?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",v,Object(l["toDisplayString"])(n.label),1)):Object(l["createCommentVNode"])("",!0)])}var x={props:{label:{type:String,default:""}},methods:{onClick(){this.$emit("onClick")}}};n("8cb2");const B=O()(x,[["render",_]]);var M=B,C={data(){return{listIndex:null,luckyIndex:0,baseSpeed:300,speed:20,hasCircleTimes:0,hasMoveTimes:0,isMoving:!1}},props:{list:{type:Array,required:!0},circleTimes:{type:Number,default:3},velocity:{type:[String],default:"speed",validator:function(e){return-1!==["invariance","speed"].indexOf(e)}},btnText:{type:String,default:"抽奖"}},methods:{onsubmit(){this.$emit("onsubmit")},go(e){if(console.log("go"),this.isMoving)return console.error("您重复调用了go()函数"),void this.$emit("onerror",{index:e,message:"您重复调用了go()函数"});let t;return t=Number(e),isNaN(t)?(console.error("go()函数传入值应该为Number类型，请检查"),void this.$emit("onerror",{index:e,message:"go()函数传入值应该为Number类型，请检查"})):t<0||t>=this.luckyList.length?(console.error("go()函数传入值应该为在 [0-"+(this.luckyList.length-1)+"] 区间内，请检查"),void this.$emit("onerror",{index:e,message:"go()函数传入值应该为在 [0-"+(this.luckyList.length-1)+"] 区间内，请检查"})):(this.luckyIndex=t,this.hasCircleTimes=0,null===this.listIndex?this.listIndex=0:this.listIndex+=1,this.$emit("onstart"),this.start(this.baseSpeed),void(this.isMoving=!0))},start(e){"speed"===this.velocity&&(this.hasMoveTimes<5?e-=this.speed+10*this.hasMoveTimes:this.hasMoveTimes>8*this.circleTimes-7&&(e+=this.speed+10*(8*this.circleTimes-this.hasMoveTimes))),setTimeout(()=>{-1!==this.hasCircleTimes?(this.listIndex<this.luckyList.length-1?this.listIndex+=1:(this.listIndex=0,this.hasCircleTimes++),this.hasCircleTimes>=this.circleTimes&&(this.hasCircleTimes=-1),this.hasMoveTimes++,this.start(e)):this.listIndex<this.luckyIndex?(this.listIndex+=1,this.hasMoveTimes++,this.start(e)):(this.luckyList[this.luckyIndex]?(console.log("恭喜您获得："+this.luckyList[this.luckyIndex].label),this.$emit("onend",this.luckyList[this.luckyIndex])):(this.$emit("onerror",{index:this.luckyIndex,message:"go函数传入的索引值无法匹配奖品列表"}),this.listIndex=0,console.error("错误捕获，luckyIndex：",this.luckyIndex)),this.hasMoveTimes=0,this.isMoving=!1)},e)}}},S={name:"LotteryGrid",components:{lotteryItem:k,lotteryGo:M},mixins:[C],computed:{luckyList(){let e=[];if(this.list&&this.list.length){e=JSON.parse(JSON.stringify(this.list));let t=e.length;if(t<8)for(let n=0;n<8-t;n++)e.push({label:"谢谢参与",id:n+t+1,index:n+t});else t>8&&e.splice(8)}return e}}};n("cf50");const T=O()(S,[["render",d]]);var L=T;const E={class:"lottery__box--list"},N={class:"lottery__list lattice__lottery__box"},$={class:"lottery__btn"};function I(e,t,n,i,o,c){const r=Object(l["resolveComponent"])("lottery-item"),s=Object(l["resolveComponent"])("lottery-go");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",E,[Object(l["createElementVNode"])("div",N,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.luckyList,(t,n)=>(Object(l["openBlock"])(),Object(l["createBlock"])(r,{isAct:n===e.listIndex,image:t.image,key:n,label:t.label,style:Object(l["normalizeStyle"])([{marginBottom:n>5&&0}])},null,8,["isAct","image","label","style"]))),128))]),Object(l["createElementVNode"])("div",$,[Object(l["createVNode"])(s,{onOnClick:e.onsubmit,label:e.btnText,class:"list"},null,8,["onOnClick","label"])])])}var w={name:"LotteryList",components:{lotteryItem:k,lotteryGo:M},mixins:[C],computed:{luckyList(){let e=[];return this.list&&this.list.length?e=JSON.parse(JSON.stringify(this.list)):console.error("入参 list 应该为数组"),e}}};n("b91c");const V=O()(w,[["render",I]]);var A=V;L.install=function(e){e.component(L.name,L)},A.install=function(e){e.component(A.name,A)};const P={key:0,class:"slotMachine"};function F(e,t,n,i,o,c){const r=Object(l["resolveComponent"])("col-ele");return n.list&&n.list.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",P,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.colCount,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(r,{moveTime:n.moveTime,list:n.list,concatCount:n.concatCount,key:e,ref_for:!0,ref:"col"},null,8,["moveTime","list","concatCount"]))),128))])):Object(l["createCommentVNode"])("",!0)}const H={class:"slotMachine__col"},D={ref:"slotMachine__ul"},G=["src"],z={key:1,class:"slotMachine__label"},J={ref:"slotMachine__li",class:"slotMachine__li hide"};function Y(e,t,n,i,o,c){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",H,[Object(l["createElementVNode"])("div",D,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.cList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"slotMachine__li",key:t},[e.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,class:"slotMachine__image",src:e.image,alt:""},null,8,G)):Object(l["createCommentVNode"])("",!0),e.label?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",z,Object(l["toDisplayString"])(e.label),1)):Object(l["createCommentVNode"])("",!0)]))),128))],512),Object(l["createElementVNode"])("div",J,null,512)])}var q={name:"SlotMachineCol",props:{list:{type:Array,default(){return[]}},concatCount:{type:[String,Number],default:3},moveTime:{type:[String,Number],default:4}},data(){return{isMoving:!1,translateY:0}},computed:{cList(){const e=this.list||[];let t=[];if(e&&e.length>0)for(let n=0;n<this.concatCount;n++)t=t.concat(e);return t}},mounted(){const e=this.$refs.slotMachine__ul.clientHeight,t=this.$refs.slotMachine__li.clientHeight;this.$refs.slotMachine__ul.style=`transform: translateY(${-e+t}px);`},methods:{go(e){if(this.isMoving)return;this.isMoving=!0;const t=this.$refs.slotMachine__ul.clientHeight,n=this.$refs.slotMachine__li.clientHeight,i=t/this.concatCount,o=-i+(this.list.length-e)*n,c=["transition-property: transform",`transition-duration: ${this.moveTime}s`,"transition-timing-function: ease-in-out",`transform: translateY(${o}px)`];this.$refs.slotMachine__ul.style=c.join(";"),setTimeout(()=>{this.isMoving=!1;const i=-t+(this.list.length-e)*n;this.$refs.slotMachine__ul.style=`transform: translateY(${i}px);`},1e3*this.moveTime)}}};n("0aaa");const R=O()(q,[["render",Y]]);var K=R;class Q{constructor({code:e,data:t=null,msg:n}){console.error(n),this.code=e,this.data=t,this.msg=n}}var U={name:"SlotMachine",components:{ColEle:K},props:{list:{type:Array,default(){return[]}},moveTime:{type:[String,Number],default:4},concatCount:{type:[String,Number],default:3},colCount:{type:[String,Number],default:3}},data(){return{isMoving:!1}},methods:{go(e){if("[object Array]"!==Object.prototype.toString.call(e))return void this.$emit("onerror",new Q({code:1e3,msg:"go函数的传参类型应为 Array"}));if(e.length!==this.colCount)return void this.$emit("onerror",new Q({code:1001,data:e,msg:`go函数的传参值长度（length：${e.length}） 不等于colCount值（colCount：${this.colCount}）`}));if(this.isMoving)return void this.$emit("onerror",new Q({code:1002,msg:"重复调用go函数"}));this.isMoving=!0;const t=this.$refs.col;for(let n=0;n<t.length;n++)setTimeout(()=>{t[n].go(e[n]),n===t.length-1&&setTimeout(()=>{this.isMoving=!1,this.$emit("onend",e)},1e3*this.moveTime)},500*n)}}};n("f424");const W=O()(U,[["render",F]]);var X=W;X.install=function(e){e.component(LotteryGrid.name,LotteryGrid)};const Z=[L,A,X],ee=function(e){ee.installed||Z.map(t=>e.component(t.name,t))};"undefined"!==typeof window&&window.Vue&&ee(window.Vue);var te={install:ee,LotteryGrid:L,LotteryList:A,SlotMachine:X};t["default"]=te},f424:function(e,t,n){"use strict";n("4296")}})}));