(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["LatticeLottery"]=t(require("vue")):e["LatticeLottery"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)i.d(n,c,function(t){return e[t]}.bind(null,c));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="f2a0")}({1902:function(e,t,i){},"22a7":function(e,t,i){},3607:function(e,t,i){"use strict";i("22a7")},"79e4":function(e,t,i){var n,c,o;(function(i,l){c=[],n=l,o="function"===typeof n?n.apply(t,c):n,void 0===o||(e.exports=o)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(b){var i,n,c,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,r=o.exec(b.stack)||l.exec(b.stack),s=r&&r[1]||!1,a=r&&r[2]||!1,u=document.location.href.replace(document.location.hash,""),m=document.getElementsByTagName("script");s===u&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),c=i.replace(n,"$1").trim());for(var d=0;d<m.length;d++){if("interactive"===m[d].readyState)return m[d];if(m[d].src===s)return m[d];if(s===u&&m[d].innerHTML&&m[d].innerHTML.trim()===c)return m[d]}return null}}return e}))},"8bbf":function(t,i){t.exports=e},"8cb2":function(e,t,i){"use strict";i("a8e5")},a8e5:function(e,t,i){},b3f2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const i=e.__vccOpts||e;for(const[n,c]of t)i[n]=c;return i}},b91c:function(e,t,i){"use strict";i("e12d")},cf50:function(e,t,i){"use strict";i("1902")},e12d:function(e,t,i){},f2a0:function(e,t,i){"use strict";if(i.r(t),"undefined"!==typeof window){var n=window.document.currentScript,c=i("79e4");n=c(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:c});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var l=i("8bbf");const r={class:"lottery__box--grid"},s={class:"lattice__lottery__box"},a={class:"lottery__row"},u={class:"lottery__row right"},m={class:"lottery__row right"};function d(e,t,i,n,c,o){const d=Object(l["resolveComponent"])("lottery-item"),b=Object(l["resolveComponent"])("lottery-go");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",r,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("div",a,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.luckyList.slice(0,3),(t,i)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:i===e.listIndex,image:t.image,key:i,label:t.label},null,8,["isAct","image","label"]))),128))]),Object(l["createElementVNode"])("div",u,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.luckyList.slice(3,4),(t,i)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:i+3===e.listIndex,image:t.image,key:i+3,label:t.label},null,8,["isAct","image","label"]))),128)),Object(l["createVNode"])(b,{onOnClick:e.onsubmit,label:e.btnText},null,8,["onOnClick","label"]),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.luckyList.slice(-1),(t,i)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{isAct:i+7===e.listIndex,image:t.image,key:i+7,label:t.label},null,8,["isAct","image","label"]))),128))]),Object(l["createElementVNode"])("div",m,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.luckyList.slice(4,7),(t,i)=>(Object(l["openBlock"])(),Object(l["createBlock"])(d,{style:[{marginBottom:0}],isAct:i+4===e.listIndex,image:t.image,key:i+4,label:t.label},null,8,["isAct","image","label"]))),128))])])])}const b=["src"],p={key:1,class:"prize__item__mask"},f={key:2};function y(e,t,i,n,c,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["prize__item","lattice__lottery__item",i.isAct?"lattice__lottery__actItem":""])},[i.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,class:"prize__item__image",src:i.image,alt:""},null,8,b)):Object(l["createCommentVNode"])("",!0),i.isAct?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",p)):Object(l["createCommentVNode"])("",!0),i.label?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",f,Object(l["toDisplayString"])(i.label),1)):Object(l["createCommentVNode"])("",!0)],2)}var h={props:{isAct:{type:Boolean,default:!1},label:{type:String,default:""},image:{type:String}}},g=(i("3607"),i("b3f2")),O=i.n(g);const k=O()(h,[["render",y]]);var j=k;const v={key:0};function _(e,t,i,n,c,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{onClick:t[0]||(t[0]=(...e)=>o.onClick&&o.onClick(...e)),class:"lottery__button lattice__lottery__btn"},[i.label?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",v,Object(l["toDisplayString"])(i.label),1)):Object(l["createCommentVNode"])("",!0)])}var x={props:{label:{type:String,default:""}},methods:{onClick(){this.$emit("onClick")}}};i("8cb2");const B=O()(x,[["render",_]]);var L=B,S={data(){return{listIndex:null,luckyIndex:0,baseSpeed:300,speed:20,hasCircleTimes:0,hasMoveTimes:0,isMoving:!1}},props:{list:{type:Array,required:!0},circleTimes:{type:Number,default:3},velocity:{type:[String],default:"speed",validator:function(e){return-1!==["invariance","speed"].indexOf(e)}},btnText:{type:String,default:"抽奖"}},methods:{onsubmit(){this.$emit("onsubmit")},go(e){if(console.log("go"),this.isMoving)return console.error("您重复调用了go()函数"),void this.$emit("onerror",{index:e,message:"您重复调用了go()函数"});let t;return t=Number(e),isNaN(t)?(console.error("go()函数传入值应该为Number类型，请检查"),void this.$emit("onerror",{index:e,message:"go()函数传入值应该为Number类型，请检查"})):t<0||t>=this.luckyList.length?(console.error("go()函数传入值应该为在 [0-"+(this.luckyList.length-1)+"] 区间内，请检查"),void this.$emit("onerror",{index:e,message:"go()函数传入值应该为在 [0-"+(this.luckyList.length-1)+"] 区间内，请检查"})):(this.luckyIndex=t,this.hasCircleTimes=0,null===this.listIndex?this.listIndex=0:this.listIndex+=1,this.$emit("onstart"),this.start(this.baseSpeed),void(this.isMoving=!0))},start(e){"speed"===this.velocity&&(this.hasMoveTimes<5?e-=this.speed+10*this.hasMoveTimes:this.hasMoveTimes>8*this.circleTimes-7&&(e+=this.speed+10*(8*this.circleTimes-this.hasMoveTimes))),setTimeout(()=>{-1!==this.hasCircleTimes?(this.listIndex<this.luckyList.length-1?this.listIndex+=1:(this.listIndex=0,this.hasCircleTimes++),this.hasCircleTimes>=this.circleTimes&&(this.hasCircleTimes=-1),this.hasMoveTimes++,this.start(e)):this.listIndex<this.luckyIndex?(this.listIndex+=1,this.hasMoveTimes++,this.start(e)):(this.luckyList[this.luckyIndex]?(console.log("恭喜您获得："+this.luckyList[this.luckyIndex].label),this.$emit("onend",this.luckyList[this.luckyIndex])):(this.$emit("onerror",{index:this.luckyIndex,message:"go函数传入的索引值无法匹配奖品列表"}),this.listIndex=0,console.error("错误捕获，luckyIndex：",this.luckyIndex)),this.hasMoveTimes=0,this.isMoving=!1)},e)}}},T={name:"LotteryGrid",components:{lotteryItem:j,lotteryGo:L},mixins:[S],computed:{luckyList(){let e=[];if(this.list&&this.list.length){e=JSON.parse(JSON.stringify(this.list));let t=e.length;if(t<8)for(let i=0;i<8-t;i++)e.push({label:"谢谢参与",id:i+t+1,index:i+t});else t>8&&e.splice(8)}return e}}};i("cf50");const I=O()(T,[["render",d]]);var C=I;const E={class:"lottery__box--list"},N={class:"lottery__list lattice__lottery__box"},M={class:"lottery__btn"};function w(e,t,i,n,c,o){const r=Object(l["resolveComponent"])("lottery-item"),s=Object(l["resolveComponent"])("lottery-go");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",E,[Object(l["createElementVNode"])("div",N,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.luckyList,(t,i)=>(Object(l["openBlock"])(),Object(l["createBlock"])(r,{isAct:i===e.listIndex,image:t.image,key:i,label:t.label,style:Object(l["normalizeStyle"])([{marginBottom:i>5&&0}])},null,8,["isAct","image","label","style"]))),128))]),Object(l["createElementVNode"])("div",M,[Object(l["createVNode"])(s,{onOnClick:e.onsubmit,label:e.btnText,class:"list"},null,8,["onOnClick","label"])])])}var V={name:"LotteryList",components:{lotteryItem:j,lotteryGo:L},mixins:[S],computed:{luckyList(){let e=[];return this.list&&this.list.length?e=JSON.parse(JSON.stringify(this.list)):console.error("入参 list 应该为数组"),e}}};i("b91c");const A=O()(V,[["render",w]]);var $=A;C.install=function(e){e.component(C.name,C)},$.install=function(e){e.component($.name,$)};const P=[C,$],z=function(e){z.installed||P.map(t=>e.component(t.name,t))};"undefined"!==typeof window&&window.Vue&&z(window.Vue);var D={install:z,LotteryGrid:C,LotteryList:$};t["default"]=D}})}));